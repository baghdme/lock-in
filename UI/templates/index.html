{% extends "base.html" %}

{% block title %}Schedule Generator{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Schedule Generator</h1>
    
    <div class="input-section">
        <h2>Enter Schedule Details</h2>
        <textarea id="scheduleText" placeholder="Enter your schedule details here..."></textarea>
        <div class="button-group">
            <button onclick="generateSchedule()">Generate Schedule</button>
            <button onclick="showImportDialog()" class="btn-secondary">Import Schedule</button>
        </div>
    </div>

    <div id="scheduleOutput"></div>
</div>

<!-- Question Dialog -->
<div id="questionDialog" class="dialog hidden">
    <div class="dialog-content">
        <h2>Missing Information</h2>
        <div id="questionText"></div>
        <div id="questionInput"></div>
        <div class="dialog-buttons">
            <button onclick="submitAnswer()">Submit</button>
            <button onclick="closeDialog()">Cancel</button>
        </div>
    </div>
</div>

<!-- Import Dialog -->
<div id="importDialog" class="dialog hidden">
    <div class="dialog-content">
        <h2>Import Calendar</h2>
        <p>Upload a JSON-formatted calendar file that follows this structure:</p>
        <pre>
{
  "Monday": [
    {
      "id": "event-1",
      "type": "task",
      "description": "Task description",
      "start_time": "09:00",
      "end_time": "11:00"
    }
  ],
  "Tuesday": [...],
  ...
}
        </pre>
        <form id="importForm" enctype="multipart/form-data">
            <input type="file" id="calendarFile" name="calendar_file" accept=".json" required>
            <div class="dialog-buttons">
                <button type="button" onclick="uploadCalendar()">Upload</button>
                <button type="button" onclick="closeImportDialog()">Cancel</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %} 